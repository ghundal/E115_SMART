SELECT 
    ch.document_id, 
    ch.page,
    ch.chunk_text,
    pgroonga_score(ch.*) AS score
FROM chunk ch
JOIN document d ON ch.document_id = d.document_id
WHERE ch.chunk_text &@~ 'What is a CNN'
--ORDER BY ch.chunk_text <%~ 'What is a CNN' DESC
ORDER BY score DESC
LIMIT 10;


SELECT 
    ch.document_id, 
    ch.page,
    ch.chunk_text,
    1 - (embedding <=> '[-0.03094927780330181, 0.04549360275268555, 0.002726300386711955, -0.004668089561164379, -0.01666676066815853, 0.019349828362464905, -0.06845948845148087, 0.0054322476498782635, 0.03905217722058296, 0.004676086362451315, 0.02881421335041523, -0.0012539690360426903, 0.05838318169116974, -0.04110720753669739, 0.049435459077358246, -0.0648702010512352, 0.028365029022097588, -0.0035963780246675014, -0.08744731545448303, -0.03709188476204872, -0.0566442534327507, -0.003132347483187914, -0.057864632457494736, -0.014018927700817585, -0.021368687972426414, -0.044461071491241455, 0.00376918725669384, -0.013847715221345425, -0.03602801635861397, -0.005492010619491339, 0.038417134433984756, -0.02653837949037552, 0.01723291166126728, -0.04168542101979256, 2.2503372747451067e-06, -0.029321053996682167, -0.0008235974819399416, -0.029401341453194618, 0.030902337282896042, -0.015995124354958534, -0.0711817741394043, 0.02365211583673954, -0.02032758854329586, 0.030445046722888947, 0.019861560314893723, -0.04689205065369606, 0.06819003820419312, 0.038016270846128464, -0.0693412572145462, -0.028176268562674522, 0.0061933486722409725, -0.038429826498031616, -0.019874146208167076, -0.01076654065400362, 0.05662564933300018, -0.05417851731181145, 0.04328456521034241, -0.012076581828296185, 0.0005541570135392249, -0.0954238548874855, -0.018277164548635483, 0.028819795697927475, -0.04781624302268028, 0.03061705082654953, -0.022867640480399132, 0.03856343403458595, 0.007303431164473295, -0.025563132017850876, 0.010783406905829906, 0.007442156318575144, 0.03626946732401848, -0.01728084310889244, 0.009161022491753101, 0.13339312374591827, -0.012709318660199642, -0.045438967645168304, 0.0006545566720888019, 0.00911807268857956, 0.003930098842829466, -0.04982281103730202, -0.018772484734654427, 0.11904886364936829, 0.028970589861273766, 0.04632941633462906, -0.003716174280270934, 0.11947498470544815, 0.004907701630145311, 0.023085778579115868, -0.023234082385897636, 0.05422470346093178, -0.006797470152378082, -0.058795809745788574, -0.001978699117898941, 0.011458225548267365, 0.011671029031276703, 0.004963275510817766, -0.05021190270781517, 0.07937658578157425, -0.007796649355441332, -0.05931749939918518, -0.04874784126877785, -0.0002624686749186367, 0.0256501417607069, 0.03665429726243019, 0.005185610149055719, 0.05011807009577751, 0.008026307448744774, -0.054930899292230606, 0.00022948851983528584, 0.03314052149653435, -0.029726136475801468, 0.01096315961331129, 0.014224973507225513, -0.025665396824479103, -0.01061779260635376, -0.02363482303917408, -0.005680750124156475, 0.018487198278307915, 0.02790212072432041, -0.01667303591966629, 0.0003059383307117969, -0.0008030355675145984, -0.01023888774216175, 0.049376919865608215, -0.007303263992071152, 0.0630006268620491, -0.0021916446276009083, 0.027343053370714188, 0.03394977003335953, 0.030651787295937538, -0.03223896399140358, -0.02854631096124649, 0.026134971529245377, -0.005262808874249458, 0.04370027780532837, 0.04140646383166313, -0.02552652172744274, 0.00016907563258428127, -0.03352063521742821, -0.029131021350622177, -0.06453589349985123, -0.0070325275883078575, -0.04980090633034706, -0.05004987120628357, 0.016639508306980133, -0.009212267585098743, 0.025880247354507446, -0.020210478454828262, 0.020469089969992638, 0.0021757050417363644, 0.03332579508423805, 0.04833598434925079, -0.015598750673234463, 0.0001608133752597496, 0.07150725275278091, -0.0007806734647601843, 0.05287640914320946, -0.03234807029366493, 0.009126607328653336, 0.04750162363052368, 0.021212685853242874, 0.030895289033651352, -0.029003236442804337, -0.021529000252485275, 0.0033863631542772055, 0.008473880589008331, 0.041830651462078094, -0.018046563491225243, 0.011775286868214607, -0.02049184776842594, -0.004942562431097031, -0.018657008185982704, -0.04400002211332321, -0.05701550468802452, 0.05986533686518669, 0.05114085599780083, 0.0135514410212636, 0.05373184010386467, -0.01724093221127987, -0.03996981680393219, 0.004174262285232544, -0.09229303151369095, 0.030622633174061775, 0.011241073720157146, -0.06374487280845642, 0.02022623084485531, -0.001268412102945149, 0.05940983444452286, -0.03841486573219299, -0.03772055357694626, 0.0069983648136258125, -0.028438175097107887, 0.04009142518043518, -0.03537287935614586, 0.003266693325713277, -0.005108604673296213, -0.0036823153495788574, 0.013963826932013035, 0.06360170990228653, -0.006315772887319326, -0.028202420100569725, -0.06264889985322952, 0.06617067009210587, 0.04855083301663399, -0.04540269821882248, -0.010720458813011646, 0.0011092653730884194, -0.04271814599633217, 0.047620028257369995, -0.02521832101047039, 0.06745873391628265, -0.0014759916812181473, 0.04312065243721008, 0.053678836673498154, -0.014001356437802315, 0.01135415118187666, 0.010098367929458618, 0.034940917044878006, -0.00466831075027585, 0.03319277986884117, -0.05405252054333687, -0.06015909090638161, -0.04460727795958519, 0.005459462758153677, 0.04117627441883087, -0.016841284930706024, -0.01754659414291382, -0.0031793727539479733, -0.01882828027009964, -0.03602191433310509, 0.011789069510996342, 0.01037981454282999, -0.00953223928809166, -0.03790155053138733, -0.034055665135383606, 0.03736242651939392, 0.03345257788896561, -0.05101821571588516, 0.015387741848826408, -0.06258139759302139, 0.05027172714471817, 0.020320510491728783, 0.019827377051115036, -0.014347882010042667, 0.011533714830875397, 0.00954557117074728, 0.07034163922071457, -0.0549829825758934, -0.024849537760019302, -0.014971320517361164, -0.029481954872608185, -0.011203094385564327, 0.07040809094905853, -0.016997961327433586, 0.020575247704982758, -0.039748359471559525, -0.03874789923429489, 0.007087746635079384, 0.002062692306935787, -0.025966599583625793, 0.05165651813149452, -0.07127615064382553, 0.04004215449094772, 0.01690484955906868, -0.005841592792421579, -0.017098763957619667, -0.0077863712795078754, 0.003451573196798563, 0.051884572952985764, 0.007898109033703804, 0.028952376917004585, -0.0025872066617012024, 0.047848425805568695, 0.0031495383009314537, -0.011234812438488007, 0.00991303101181984, -0.0646863803267479, -0.020986801013350487, -0.027325032278895378, 0.034761033952236176, 0.02715158276259899, 0.01885508932173252, -0.032904043793678284, -0.033911723643541336, 0.007098799105733633, -0.01512186974287033, -0.01588067226111889, -0.013000245206058025, -0.015515042468905449, -0.03751537948846817, -0.03571323677897453, 0.0018465155735611916, -0.0107139702886343, -0.02473478578031063, 0.027107901871204376, 0.03232721611857414, 0.0018726292764768004, 0.00547461211681366, -0.01468167919665575, 0.08832792937755585, -0.003927270416170359, 0.011752535589039326, -0.0116938017308712, -0.023147525265812874, 0.038473766297101974, -0.02138325572013855, -0.004075558390468359, -0.03364359214901924, 0.029708731919527054, 0.06363946199417114, 0.03023138828575611, -0.0012458540732041001, -0.014099656604230404, 0.013263056986033916, 0.005926270037889481, -0.0004347791546024382, -0.014145930297672749, -0.05549677833914757, -0.025210725143551826, 0.01974279060959816, 0.025819076225161552, -0.020416999235749245, -0.04608413577079773, -0.04665195941925049, 0.03149404376745224, -0.02113533206284046, 0.005292213521897793, 0.07137207686901093, -0.01830805093050003, -0.042152632027864456, -0.002456574933603406, -0.005412029102444649, 0.015752194449305534, 0.022472014650702477, 0.06983016431331635, -0.026939308270812035, -0.020904069766402245, -0.03381868079304695, 0.013702926225960255, 0.03166460245847702, -0.01607777737081051, 0.017489220947027206, -0.0650070458650589, -0.012763233855366707, -0.03225767984986305, -0.040454428642988205, -0.023477841168642044, 0.013650400564074516, -0.056830402463674545, 0.04380710795521736, 0.002660181140527129, 0.023377686738967896, -0.037493862211704254, -0.027044380083680153, -0.03796110674738884, -0.040791820734739304, -0.002212114166468382, -0.008820215240120888, -0.007525553926825523, -0.05338132008910179, -0.059605102986097336, 0.04554392769932747, 0.05448627471923828, -0.028052134439349174, 0.05531034246087074, 0.002743180375546217, 0.06027248874306679, 0.033203694969415665, -0.014480482786893845, 0.003370249178260565, 0.03340258076786995, 0.00726128788664937, 0.04863086715340614, 0.017524702474474907, 0.030267857015132904, 0.05376258119940758, 0.03925204649567604, 0.034391846507787704, -0.031060440465807915, -0.017519908025860786, 0.04359462112188339, 0.0048971883952617645, -0.026097774505615234, 0.016082031652331352, -0.027442360296845436, -0.02094714343547821, -0.02712339162826538, 0.010677969083189964, -0.010023250244557858, 0.024874813854694366, 0.006758889649063349, 0.06280388683080673, 0.04155145585536957, 0.06278970837593079, 0.03528594970703125, 0.038380470126867294, -0.018714549019932747, 0.045142874121665955, -0.0007281398284249008, -0.005766641348600388, 0.001461994950659573, 0.04042426124215126, 0.03567175194621086, 0.03867277130484581, 0.009750638157129288, -0.055732861161231995, 0.018503036350011826, 0.0058454847894608974, 0.005141791421920061, -0.12846361100673676, -0.00930296815931797, -0.01611919142305851, -0.007899521850049496, -0.03980129584670067, 0.06042387709021568, -0.026261335238814354, -0.04383882135152817, -0.04240288585424423, 0.059877581894397736, -0.05647828429937363, -0.03696995601058006, -0.02541905827820301, 0.02445795200765133, -0.03470661863684654, -0.04905178025364876, 0.020506998524069786, 0.005624973215162754, 0.0036777835339307785, 0.05243498086929321, 0.008887221105396748, -0.027679909020662308, 0.014666061848402023, -0.03587047755718231, -0.008842659182846546, 0.017227642238140106, -0.13933449983596802, -0.00840994343161583, 0.05271856114268303, 0.025276819244027138, -0.07376330345869064, 0.016328800469636917, 0.014405368827283382, 0.06129807233810425, -0.030314164236187935, 0.048420604318380356, -0.034446943551301956, -0.011404295451939106, -0.0969729870557785, -0.07398033887147903, 0.026744475588202477, 0.05540712550282478, 0.022494837641716003, 0.02660018764436245, 0.03697231411933899, 0.0261831171810627, -0.003055259585380554, 0.09753882139921188, -0.02757096290588379, 0.000582894601393491, 0.004873320460319519, 0.07859071344137192, 0.025551127269864082, -0.03539879992604256, -0.01634255051612854, 0.04513860493898392, -0.07376368343830109, -0.003079286776483059, 0.014897155575454235, -0.005138975102454424, -0.0017528070602566004, -0.0397285521030426, 0.0073120491579174995, 0.017373381182551384, -0.014845635741949081, 0.021252498030662537, 0.03268813714385033, -0.03929740563035011, 0.03227202594280243, 0.08216835558414459, -0.006406679749488831, -0.024501055479049683, -0.017464933916926384, -0.028051653876900673, -0.004799154587090015, -0.01069564651697874, -0.010333960875868797, 0.031474530696868896, -0.0469839945435524, -0.004664796404540539, 0.02444961853325367, -0.055372290313243866, 0.006353453733026981, -0.030464420095086098, -0.09834422171115875, -0.00700096320360899, -0.02054949477314949, -0.032786622643470764, 0.02847990393638611, 0.05532194301486015, 0.0030063213780522346, -0.016431502997875214, 0.03677660599350929, 0.016023507341742516, -0.025541706010699272, 0.01488263439387083, -0.014125441201031208, -0.004428162705153227, -0.032327599823474884, 0.005537733435630798, -0.03830653056502342, -0.07868942618370056, 0.016495171934366226, -0.023921767249703407, -0.019384251907467842, 0.03313245251774788, 0.11461500078439713, 0.0392160527408123, -0.07145734876394272, 0.015611851587891579, 0.014507357962429523, 0.008609823882579803, 0.025813963264226913, 0.008400078862905502, 0.019488628953695297, 0.040722623467445374, 0.06707701086997986, 0.028540465980768204, -0.04332462325692177, -0.0023258677683770657, 0.002737075788900256, -0.030820922926068306, 0.006609790027141571, 0.08428126573562622, -0.0058670672588050365, -0.05841991677880287, -0.009676079265773296, 0.007209995295852423, 0.00357170426286757, -0.024954592809081078, 0.03327209874987602, 0.006926160305738449, -0.012393745593726635, 0.039506975561380386, 0.016887294128537178, 0.03632573410868645, 0.05056246742606163, -0.0310190562158823, 0.00709457416087389, 0.023421427235007286, 0.0011609625071287155, 0.02442716434597969, 0.02879050374031067, -0.018853962421417236, -0.013906475156545639, 0.1133074164390564, -8.799432592096953e-33, 0.007905804552137852, 0.008698292076587677, 0.04142120108008385, -0.0030284817330539227, -0.06876739859580994, -0.004321490880101919, 0.0071192518807947636, 0.005906637292355299, -0.04580792412161827, 0.021807925775647163, -0.04716473072767258, -0.027883293107151985, 0.04475311189889908, -0.021770425140857697, -0.02705676667392254, 0.008502604439854622, 0.007371602579951286, 0.006985751446336508, -0.00802631489932537, -0.00945867970585823, -0.0002127742482116446, 0.020125973969697952, 0.039347872138023376, 0.03448840230703354, 0.042759984731674194, -0.07071477174758911, -0.04310799017548561, -0.0190066359937191, 0.05156714841723442, -0.024020027369260788, -0.0137168662622571, -0.005402946379035711, -0.012926513329148293, 0.037735890597105026, -0.005186946131289005, 0.03139278292655945, 0.03774874657392502, -0.01762043870985508, -0.04120727255940437, -0.002206098986789584, -0.08104977756738663, -0.03044755384325981, 0.023395853117108345, 0.02233150228857994, 0.03613254427909851, -0.049303069710731506, 0.010853283107280731, -0.029857568442821503, 0.0004270379722584039, 0.05253201723098755, -0.002850242191925645, 0.012071240693330765, -0.005839652847498655, -0.04463598504662514, -0.02922501228749752, -0.02048758789896965, -0.01721377670764923, -0.038514554500579834, -0.06236202269792557, -0.04222304746508598, 0.03872596099972725, 0.0006820886046625674, -0.001950594480149448, -0.056556981056928635, -0.00484801921993494, 0.012989628128707409, 0.02556907944381237, 0.026321135461330414, 0.05608917027711868, -0.017214694991707802, 0.009527243673801422, 0.06900765746831894, -0.011783617548644543, -0.029714176431298256, -0.037528134882450104, -0.04894246533513069, -0.017569150775671005, 0.034335702657699585, -0.019798224791884422, 0.038578376173973083, -0.013841971755027771, -0.02076796256005764, 0.03008965030312538, 0.01161335501819849, 0.006022508721798658, -0.0490129292011261, -0.004834474064409733, 0.07906447350978851, 0.029299190267920494, -0.009939414449036121, 0.0004770102386828512, -0.03437311574816704, 0.009069384075701237, -0.0413178987801075, 0.014565125107765198, -0.008655472658574581, -0.008945402689278126, -0.019719451665878296, -0.01928410306572914, -0.041391149163246155, 0.052419666200876236, 0.05709510296583176, -0.029172275215387344, 0.05834157392382622, 0.024205900728702545, 0.021034613251686096, -0.03469369560480118, 0.02804199978709221, -0.06143694370985031, -0.02358323708176613, -0.007838680408895016, 0.0009011231013573706, 0.05842038616538048, 0.01301766000688076, 0.0031306659802794456, 0.01813735067844391, 0.005269896239042282, -0.06995225697755814, -0.022060390561819077, -0.050399050116539, 0.017457233741879463, -0.004988954868167639, -0.052168477326631546, 0.03620361536741257, -0.016398292034864426, 0.026200661435723305, 0.05746281519532204, 0.0751638412475586, 0.011637800373136997, -0.05628553777933121, -0.029612187296152115, 0.01650983840227127, 2.828587355452328e-07, -0.009191165678203106, 0.027092430740594864, 0.005567409098148346, 0.0672646313905716, -0.005287633743137121, -0.031577978283166885, -0.06173137202858925, 0.027753246948122978, -0.018484633415937424, 0.023197045549750328, 0.021875562146306038, -0.027411114424467087, 0.012874053791165352, -0.02505502663552761, 0.025213737040758133, -0.0058617740869522095, 0.009246112778782845, -0.018045056611299515, 0.010437716729938984, -0.09603111445903778, -0.023064786568284035, -0.015788046643137932, 0.013035393320024014, -0.020294636487960815, -0.041039977222681046, -0.027327369898557663, 0.03624929487705231, -0.02028738334774971, 0.06757356971502304, -0.028481340035796165, 0.03690459579229355, -0.011519968509674072, -0.035961419343948364, -0.00926540233194828, -0.017579618841409683, 0.04259829595685005, 0.02810055762529373, 0.047850191593170166, 0.00853351317346096, 0.034302968531847, -0.07171933352947235, -0.007266385480761528, -0.009584943763911724, 0.010346997529268265, 0.004225510638207197, 0.03402237594127655, 0.0037815545219928026, 0.054909802973270416, 0.011559545993804932, -0.04475260153412819, -0.005411106161773205, 0.016055850312113762, 0.03966172784566879, 0.039367642253637314, -0.009061893448233604, -0.009916688315570354, 0.03235146403312683, 0.044949088245630264, -0.016792278736829758, -0.021352870389819145, -0.050147753208875656, -0.0099604157730937, -0.010062900371849537, 0.019245613366365433, -0.011730493046343327, 0.0710059329867363, 0.006036654114723206, 1.359422826910623e-34, -0.00745501508936286, -0.02238769829273224, 0.0332183800637722, 0.014775779098272324, -0.023609768599271774, -0.003913918975740671, -0.017946122214198112, -0.017005139961838722, 0.0036518024280667305, -0.05475474148988724, -0.006048310548067093]') AS similarity
FROM chunk ch
JOIN document d ON ch.document_id = d.document_id
ORDER BY similarity DESC